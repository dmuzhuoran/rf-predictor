
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cluster Prediction Tool</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>Cluster Prediction Tool</h2>

  <h3>Single Sample Prediction</h3>
  <form id="predict-form">
    <div class="grid">
      <!-- Auto-generate input fields -->
<label>Age<input type="number" step="any" id="Age"></label>
<label>Female<input type="number" step="any" id="Female"></label>
<label>Fever<input type="number" step="any" id="Fever"></label>
<label>Weight.loss<input type="number" step="any" id="Weight.loss"></label>
<label>Proximal.pain<input type="number" step="any" id="Proximal.pain"></label>
<label>Peripheral.arthritis<input type="number" step="any" id="Peripheral.arthritis"></label>
<label>Headache<input type="number" step="any" id="Headache"></label>
<label>Jaw.claudication<input type="number" step="any" id="Jaw.claudication"></label>
<label>Visual.symptoms<input type="number" step="any" id="Visual.symptoms"></label>
<label>ESR<input type="number" step="any" id="ESR"></label>
<label>CRP<input type="number" step="any" id="CRP"></label>
<label>WBC<input type="number" step="any" id="WBC"></label>
<label>Hb<input type="number" step="any" id="Hb"></label>
<label>PLT<input type="number" step="any" id="PLT"></label>
<label>Neutrophils<input type="number" step="any" id="Neutrophils"></label>
<label>Lymphocytes<input type="number" step="any" id="Lymphocytes"></label>
<label>Hct<input type="number" step="any" id="Hct"></label>
<label>RDW<input type="number" step="any" id="RDW"></label>
<label>RF<input type="number" step="any" id="RF"></label>
<label>CCP<input type="number" step="any" id="CCP"></label>
<label>ANA<input type="number" step="any" id="ANA"></label>
<label>ALT<input type="number" step="any" id="ALT"></label>
<label>AST<input type="number" step="any" id="AST"></label>
<label>GGT<input type="number" step="any" id="GGT"></label>
<label>ALP<input type="number" step="any" id="ALP"></label>
<label>Albumin<input type="number" step="any" id="Albumin"></label>
    </div>
    <button type="button" onclick="predictSingle()">Predict</button>
  </form>

  <div id="single-result"></div>

  <h3>Batch Prediction (Upload CSV)</h3>
  <input type="file" id="csvFile" accept=".csv" />
  <button onclick="predictBatch()">Upload & Predict</button>
  <div id="batch-result"></div>

  <script src="rf_model.js"></script>
  <script>
    const featureList = [
      "Age", "Female", "Fever", "Weight.loss", "Proximal.pain",
      "Peripheral.arthritis", "Headache", "Jaw.claudication", "Visual.symptoms",
      "ESR", "CRP", "WBC", "Hb", "PLT", "Neutrophils", "Lymphocytes", "Hct", "RDW",
      "RF", "CCP", "ANA", "ALT", "AST", "GGT", "ALP", "Albumin"
    ];

    function predictSingle() {
      const input = featureList.map(id => parseFloat(document.getElementById(id).value || 0));
      const cluster = predict(input);
      document.getElementById("single-result").innerText = "Predicted Cluster: " + cluster;
    }

    function predictBatch() {
      const fileInput = document.getElementById("csvFile");
      if (!fileInput.files.length) return;

      const reader = new FileReader();
      reader.onload = function (e) {
        const rows = e.target.result.trim().split("\n");
        const headers = rows[0].split(",");
        const data = rows.slice(1).map(row => row.split(",").map(parseFloat));

        const results = data.map((sample, idx) => "Sample " + (idx + 1) + ": Cluster " + predict(sample));
        document.getElementById("batch-result").innerHTML = "<pre>" + results.join("\n") + "</pre>";
      };
      reader.readAsText(fileInput.files[0]);
    }
  </script>
</body>
</html>
